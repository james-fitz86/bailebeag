{% extends "config/base.html" %}
{% load crispy_forms_tags %}

{% block title %}Notification{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="h4 mb-4">Notification Details</h1>

    <div class="card shadow-sm">
        <div class="card-body">
            <h5 class="card-title mb-3">
                {{ notification.message|default:"Notification" }}
            </h5>

            <p class="card-text">
                <small class="text-muted">
                    Received: {{ notification.created_at|date:"M j, Y, g:i a" }}
                </small>
            </p>

            {% if notification.payload %}
                <div class="mt-3">
                    <h6>Details</h6>
                    <pre class="bg-light p-3 rounded small">{{ notification.payload|json_script:"payload" }}</pre>
                </div>
            {% endif %}

            {% if notification.target_id %}
                <a href="{% url 'booking_detail' pk=notification.target_id %}" class="btn btn-primary btn-sm">
                    View Booking
                </a>
            {% endif %}

            {% if request.GET.next == 'profile' %}
                <a href="{% url 'profile' %}" class="btn btn-outline-secondary btn-sm">
                    Back to Profile
                </a>
            {% else %}
                <a href="{% url 'notification_list' %}" class="btn btn-outline-secondary btn-sm">
                    Back to Notifications
                </a>
            {% endif %}

        </div>
    </div>
</div>
{% endblock %}
