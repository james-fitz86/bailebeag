{% extends "config/base.html" %}
{% load crispy_forms_tags %}

{% block title %}Book a Pitch{% endblock %}

{% block content %}
{% load static %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <form method="POST" novalidate id="booking_form">
                {% csrf_token %}
                <fieldset class="border p-4 rounded shadow-sm">
                    <legend class="mb-3">{% if object %}Update Booking{% else %}Book a Pitch{% endif %}</legend>
                    <p class="text-muted mb-3">
                        Bookings are for <strong>1-hour slots</strong> starting on the hour (e.g. 18:00, 19:00).
                        The end time will be set automatically.
                    </p>
                    {{ form|crispy }}
                </fieldset>
                <div class="mt-3 d-flex justify-content-between gap-2">
                    <button type="submit" class="btn btn-primary w-100">
                        {% if object %}Update{% else %}Submit Booking{% endif %}
                    </button>
                    {% if object %}
                        <a href="{% url 'booking_detail' object.id %}" class="btn btn-secondary w-100">Back to Booking</a>
                    {% endif %}
                </div>
            </form>

            {% if not request.user.is_authenticated %}
            <div class="text-center mt-3">
                <small>
                    Already have an account?
                    <a href="{% url 'login' %}">Sign In</a> to skip filling in your details.
                </small>
            </div>
            {% endif %}
        </div>
    </div>
</div>
<script src="{% static 'config/js/pitch_booking_form.js' %}"></script>
{% endblock content %}

